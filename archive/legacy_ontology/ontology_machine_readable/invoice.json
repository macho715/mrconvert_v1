{
  "meta": {
    "source": "C:\\Users\\minky\\Downloads\\mrconvert_v1\\ONTOLOGY\\INVOICE.docx",
    "type": "docx",
    "pages": null,
    "parsed_at": "2025-10-19T17:51:46+00:00",
    "ocr": {
      "used": false,
      "engine": "none",
      "lang": null
    }
  },
  "text": "ExecSummary\n온톨로지-퍼스트 청구서 시스템은 “멀티-키 아이덴티티 그래프(BL/Container/DO/Invoice/Case/Booking/ShipmentID/…/hvdc_code 아무 키든 OK)” 위에서 Invoice→Line→OD Lane→RateRef→Δ%→Risk로 한 번에 캐스케이드합니다. (EN-KR: Any-key in → Resolve → Lane&Rate join → Δ% risk band.)\n표준요율은 Air/Container/Bulk 계약 레퍼런스와 Inland Trucking(OD×Unit) 테이블을 온톨로지 클래스로 들고, 모든 계산은 USD 기준·고정환율 1.00 USD=3.6725 AED 규칙을 따릅니다. \nOD 정규화·조인은 ApprovedLaneMap/RefDestinationMap을 통해 수행되고, 결과는 **COST-GUARD Δ% 밴드(PASS/WARN/HIGH/CRITICAL)**로 귀결됩니다. \n감사 트레이스는 PRISM.KERNEL 포맷(5-line recap + proof.artifact JSON)으로 고정 형식으로 남깁니다. \nVisual — 핵심 클래스/관계(요약)\n자료: 표준요율 테이블(계약)·고정 FX 규정·Lane 정규화 지도. \nHow it works (flow)\n키 해석(Identity): BL/Container/DO/Invoice/… 입력 → 동일 실체(Shipment/Doc) 클러스터 식별. (멀티-키 그래프)\nLane 정규화: 원지/착지 명칭을 RefDestinationMap으로 정규화 → ApprovedLaneMap에서 lane 통계/표준요율 후보 추출. \nRate 조인: 라인별 Category+Port+Destination+Unit로 계약 요율 테이블 매칭(±3% 톨러런스). \nΔ% & 밴드 산정: Δ%=(draft−ref)/ref×100 → PASS/WARN/HIGH/CRITICAL (COST-GUARD). FX는 USD 고정(3.6725)로 비교. \n감사 아티팩트: PRISM.KERNEL로 5-라인 요약 + JSON 증빙(입력/계산/판정 해시). \nOptions (설계 선택지)\nOWL/SHACL 엄격형: 스키마·제약(단위/Currency/OD 필수)로 하드 밸리데이션. Pros 규정준수↑ / Cons 초기 모델링 비용↑.\n하이브리드형(권장): OWL+Lane Map+계약요율+Δ% 밴드, 부족 구간은 유사 레인 추천. Pros 커버리지↑ / Cons Ref 미보유 구간 튜닝 필요. \n마켓레이트 보강형: Market API(At-cost 항목)에 한정 보조. Pros 현실성↑ / Cons 출처 관리·증빙 필요.\nRoadmap (P→Pi→B→O→S + KPI)\nPrepare: RefDestinationMap 최신화, Lane 조인율≥80% 달성. \nPilot: /switch_mode COST-GUARD + /logi-master invoice-audit --deep --highlight-mismatch로 월간 샘플 1회전. KPI: 검증정확도 ≥97%, 자동화 ≥94%. \nBuild: 라인별 Δ%·밴드·증빙(표준요율 근거 링크) 자동 표기, 통화정책 락. \nOperate: High/CrITICAL 즉시 TG 알림 + 반려 사유 템플릿. \nScale: Lane 그래프 스냅샷/변동 추적, 분기별 임계치 튜닝. \nAutomation notes\n입력 감지 → /switch_mode COST-GUARD + /logi-master invoice-audit (OD 정규화→Rate 조인→Δ% 밴드→PASS/FAIL 표). \n표준 근거: Air/Container/Bulk/Trucking 계약표 + Inland Ref(정리본). \n감사 포맷: PRISM 5-라인 + JSON proof(해시). \nQA / Gap 체크\nLine 단위가 per truck vs per RT 혼재 시 단위환산 룰 적용? (컨/Bulk 교차 구간) \nCURRENCY_MISMATCH/고정 FX(3.6725) 락 확인? \nLane 조인 실패(REF_MISSING) 건은 유사도≥0.60 Top-3 제안 출력? \n증빙 링크(표준요율 원천, Lane 통계)와 PRISM proof 동시 첨부? \n가정: (i) 계약표는 최신판으로 동기화됨, (ii) 환율 고정 정책 유지, (iii) SHACL Shapes는 내부 표준에 따라 배포됨.\n원한다면, 너한테 맞춘 “클래스·프로퍼티 TTL 스켈레톤 + SHACL” 바로 뽑아줄게.",
  "markdown": "__ExecSummary__\n\n__온톨로지\\-퍼스트 청구서 시스템__은 “__멀티\\-키 아이덴티티 그래프__\\(BL/Container/DO/Invoice/Case/Booking/ShipmentID/…/hvdc\\_code 아무 키든 OK\\)” 위에서 __Invoice→Line→OD Lane→RateRef→Δ%→Risk__로 한 번에 캐스케이드합니다\\. \\(EN\\-KR: Any\\-key in → Resolve → Lane&Rate join → Δ% risk band\\.\\)  \n표준요율은 __Air/Container/Bulk 계약 레퍼런스__와 __Inland Trucking\\(OD×Unit\\) 테이블__을 온톨로지 클래스로 들고, 모든 계산은 __USD 기준·고정환율 1\\.00 USD=3\\.6725 AED__ 규칙을 따릅니다\\.   \nOD 정규화·조인은 __ApprovedLaneMap/RefDestinationMap__을 통해 수행되고, 결과는 \\*\\*COST\\-GUARD Δ% 밴드\\(PASS/WARN/HIGH/CRITICAL\\)\\*\\*로 귀결됩니다\\.   \n감사 트레이스는 __PRISM\\.KERNEL__ 포맷\\(5\\-line recap \\+ proof\\.artifact JSON\\)으로 고정 형식으로 남깁니다\\. \n\n__Visual — 핵심 클래스/관계\\(요약\\)__\n\n__Class__\n\n__핵심 속성__\n\n__관계__\n\n__근거/조인 소스__\n\n__결과__\n\nhvdc:Invoice\n\ndocId, vendor, issueDate, currency\n\nhasLine → InvoiceLine\n\n—\n\n상태, 총액, proof\n\nhvdc:InvoiceLine\n\nchargeDesc, qty, unit, draftRateUSD\n\nhasLane → ODLane / uses → RateRef\n\nInland Trucking/Table, Air/Container/Bulk Rate\n\nΔ%, cg\\_band\n\nhvdc:ODLane\n\norigin\\_norm, destination\\_norm, vehicle, unit\n\njoinedBy → ApprovedLaneMap\n\nRefDestinationMap, Lane stats\n\nmedian\\_rate\\_usd\n\nhvdc:RateRef\n\nrate\\_usd, tolerance\\(±3%\\), source\\(contract/market/special\\)\n\nper Category/Port/Dest/Unit\n\nAir/Container/Bulk/Trucking tables\n\nref\\_rate\\_usd\n\nhvdc:CurrencyPolicy\n\nbase=USD, fx=3\\.6725\n\nvalidates Invoice/Line\n\ncurrency\\_mismatch rule\n\n환산/락\n\nhvdc:RiskResult\n\ndelta\\_pct, cg\\_band, verdict\n\nfrom Line vs Ref\n\nCOST\\-GUARD bands\n\nPASS/FAIL\n\n자료: 표준요율 테이블\\(계약\\)·고정 FX 규정·Lane 정규화 지도\\. \n\n__How it works \\(flow\\)__\n\n1. __키 해석\\(Identity\\)__: BL/Container/DO/Invoice/… 입력 → 동일 실체\\(Shipment/Doc\\) 클러스터 식별\\. \\(멀티\\-키 그래프\\)\n2. __Lane 정규화__: 원지/착지 명칭을 __RefDestinationMap__으로 정규화 → __ApprovedLaneMap__에서 lane 통계/표준요율 후보 추출\\. \n3. __Rate 조인__: 라인별 __Category\\+Port\\+Destination\\+Unit__로 계약 요율 테이블 매칭\\(±3% 톨러런스\\)\\. \n4. __Δ% & 밴드 산정__: Δ%=\\(draft−ref\\)/ref×100 → __PASS/WARN/HIGH/CRITICAL__ \\(COST\\-GUARD\\)\\. FX는 USD 고정\\(3\\.6725\\)로 비교\\. \n5. __감사 아티팩트__: __PRISM\\.KERNEL__로 5\\-라인 요약 \\+ JSON 증빙\\(입력/계산/판정 해시\\)\\. \n\n__Options \\(설계 선택지\\)__\n\n1. __OWL/SHACL 엄격형__: 스키마·제약\\(단위/Currency/OD 필수\\)로 하드 밸리데이션\\. *Pros* 규정준수↑ / *Cons* 초기 모델링 비용↑\\.\n2. __하이브리드형\\(권장\\)__: OWL\\+Lane Map\\+계약요율\\+Δ% 밴드, 부족 구간은 유사 레인 추천\\. *Pros* 커버리지↑ / *Cons* Ref 미보유 구간 튜닝 필요\\. \n3. __마켓레이트 보강형__: Market API\\(At\\-cost 항목\\)에 한정 보조\\. *Pros* 현실성↑ / *Cons* 출처 관리·증빙 필요\\.\n\n__Roadmap \\(P→Pi→B→O→S \\+ KPI\\)__\n\n- __Prepare__: RefDestinationMap 최신화, Lane 조인율≥80% 달성\\. \n- __Pilot__: /switch\\_mode COST\\-GUARD \\+ /logi\\-master invoice\\-audit \\-\\-deep \\-\\-highlight\\-mismatch로 월간 샘플 1회전\\. KPI: 검증정확도 ≥97%, 자동화 ≥94%\\. \n- __Build__: 라인별 Δ%·밴드·증빙\\(표준요율 근거 링크\\) 자동 표기, 통화정책 락\\. \n- __Operate__: High/CrITICAL 즉시 TG 알림 \\+ 반려 사유 템플릿\\. \n- __Scale__: Lane 그래프 스냅샷/변동 추적, 분기별 임계치 튜닝\\. \n\n__Automation notes__\n\n- __입력 감지 →__ /switch\\_mode COST\\-GUARD \\+ /logi\\-master invoice\\-audit \\(OD 정규화→Rate 조인→Δ% 밴드→PASS/FAIL 표\\)\\. \n- __표준 근거__: Air/Container/Bulk/Trucking 계약표 \\+ Inland Ref\\(정리본\\)\\. \n- __감사 포맷__: PRISM 5\\-라인 \\+ JSON proof\\(해시\\)\\. \n\n__QA / Gap 체크__\n\n- Line 단위가 __per truck vs per RT__ 혼재 시 단위환산 룰 적용? \\(컨/Bulk 교차 구간\\) \n- __CURRENCY\\_MISMATCH__/고정 FX\\(3\\.6725\\) 락 확인? \n- Lane 조인 실패\\(REF\\_MISSING\\) 건은 유사도≥0\\.60 Top\\-3 제안 출력? \n- 증빙 링크\\(표준요율 원천, Lane 통계\\)와 PRISM proof 동시 첨부? \n\n가정: \\(i\\) 계약표는 최신판으로 동기화됨, \\(ii\\) 환율 고정 정책 유지, \\(iii\\) SHACL Shapes는 내부 표준에 따라 배포됨\\.\n\n__원한다면, 너한테 맞춘 “클래스·프로퍼티 TTL 스켈레톤 \\+ SHACL” 바로 뽑아줄게\\.__\n\n",
  "tables": [
    {
      "page": null,
      "index": 0,
      "rows": [
        [
          "Class",
          "핵심 속성",
          "관계",
          "근거/조인 소스",
          "결과"
        ],
        [
          "hvdc:Invoice",
          "docId, vendor, issueDate, currency",
          "hasLine → InvoiceLine",
          "—",
          "상태, 총액, proof"
        ],
        [
          "hvdc:InvoiceLine",
          "chargeDesc, qty, unit, draftRateUSD",
          "hasLane → ODLane / uses → RateRef",
          "Inland Trucking/Table, Air/Container/Bulk Rate",
          "Δ%, cg_band"
        ],
        [
          "hvdc:ODLane",
          "origin_norm, destination_norm, vehicle, unit",
          "joinedBy → ApprovedLaneMap",
          "RefDestinationMap, Lane stats",
          "median_rate_usd"
        ],
        [
          "hvdc:RateRef",
          "rate_usd, tolerance(±3%), source(contract/market/special)",
          "per Category/Port/Dest/Unit",
          "Air/Container/Bulk/Trucking tables",
          "ref_rate_usd"
        ],
        [
          "hvdc:CurrencyPolicy",
          "base=USD, fx=3.6725",
          "validates Invoice/Line",
          "currency_mismatch rule",
          "환산/락"
        ],
        [
          "hvdc:RiskResult",
          "delta_pct, cg_band, verdict",
          "from Line vs Ref",
          "COST-GUARD bands",
          "PASS/FAIL"
        ]
      ]
    }
  ]
}